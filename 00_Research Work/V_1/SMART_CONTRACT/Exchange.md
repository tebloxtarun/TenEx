
# BluePrint for Exchange Contract

```bash
contract UniswapExchangeInterface():
    # Public Variables
    def tokenAddress() -> address: constant
    def factoryAddress() -> address: constant
    # Providing Liquidity
    def addLiquidity(min_liquidity: uint256, max_tokens: uint256, deadline: timestamp) -> uint256: modifying
    def removeLiquidity(amount: uint256, min_eth: uint256(wei), min_tokens: uint256, deadline: timestamp) -> (uint256(wei), uint256): modifying
    # Trading
    def ethToTokenSwapInput(min_tokens: uint256, deadline: timestamp) -> uint256: modifying
    def ethToTokenTransferInput(min_tokens: uint256, deadline: timestamp, recipient: address) -> uint256: modifying
    def ethToTokenSwapOutput(tokens_bought: uint256, deadline: timestamp) -> uint256(wei): modifying
    def ethToTokenTransferOutput(tokens_bought: uint256, deadline: timestamp, recipient: address) -> uint256(wei): modifying
    def tokenToEthSwapInput(tokens_sold: uint256, min_eth: uint256(wei), deadline: timestamp) -> uint256(wei): modifying
    def tokenToEthTransferInput(tokens_sold: uint256, min_eth: uint256(wei), deadline: timestamp, recipient: address) -> uint256(wei): modifying
    def tokenToEthSwapOutput(eth_bought: uint256(wei), max_tokens: uint256, deadline: timestamp) -> uint256: modifying
    def tokenToEthTransferOutput(eth_bought: uint256(wei), max_tokens: uint256, deadline: timestamp, recipient: address) -> uint256: modifying
    def tokenToTokenSwapInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256(wei), deadline: timestamp, token_addr: address) -> uint256: modifying
    def tokenToTokenTransferInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256(wei), deadline: timestamp, recipient: address, token_addr: address) -> uint256: modifying
    def tokenToTokenSwapOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256(wei), deadline: timestamp, token_addr: address) -> uint256: modifying
    def tokenToTokenTransferOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256(wei), deadline: timestamp, recipient: address, token_addr: address) -> uint256: modifying
    def tokenToExchangeSwapInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256(wei), deadline: timestamp, exchange_addr: address) -> uint256: modifying
    def tokenToExchangeTransferInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256(wei), deadline: timestamp, recipient: address, exchange_addr: address) -> uint256: modifying
    def tokenToExchangeSwapOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256(wei), deadline: timestamp, exchange_addr: address) -> uint256: modifying
    def tokenToExchangeTransferOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256(wei), deadline: timestamp, recipient: address, exchange_addr: address) -> uint256: modifying
    # Get Price
    def getEthToTokenInputPrice(eth_sold: uint256(wei)) -> uint256: constant
    def getEthToTokenOutputPrice(tokens_bought: uint256) -> uint256(wei): constant
    def getTokenToEthInputPrice(tokens_sold: uint256) -> uint256(wei): constant
    def getTokenToEthOutputPrice(eth_bought: uint256(wei)) -> uint256: constant
    # Pool Token ERC20 Compatibility
    def balanceOf() -> address: constant
    def allowance(_owner : address, _spender : address) -> uint256: constant
    def transfer(_to : address, _value : uint256) -> bool: modifying
    def transferFrom(_from : address, _to : address, _value : uint256) -> bool: modifying
    def approve(_spender : address, _value : uint256) -> bool: modifying
    # Setup
    def setup(token_addr: address): modifying
```


### Uniswap Exchange contract function

| Function                      | Parameter(s)                                                                                   | Returns                                       | Smart Contract Function                                                                 | Web3 Call                                                                                                   | Description                                                                                                            |
|-------------------------------|-----------------------------------------------------------------------------------------------|-----------------------------------------------|----------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| setup                         | `token_addr` (address)                                                                        | N/A                                           | `setup(token_addr: address)`                                                          | `exchangeContract.methods.setup(token: String).send()`                                                     | Can only be called by factory contract during `createExchange()`.                                                      |
| addLiquidity                  | `min_liquidity` (uint256), `max_tokens` (uint256), `deadline` (uint256)                        | `uint256` Amount of liquidity tokens minted   | `@payable addLiquidity(min_liquidity: uint256, max_tokens: uint256, deadline: uint256): uint256`          | `exchangeContract.methods.addLiquidity(min_liquidity, max_tokens, deadline).send({ value: ethValue })`     | Adds liquidity to the pool.                                                                                             |
| removeLiquidity               | `amount` (uint256), `min_eth` (uint256), `min_tokens` (uint256), `deadline` (uint256)          | `uint256` Amount of ETH removed, `uint256` Amount of ERC20 tokens removed | `removeLiquidity(amount: uint256, min_eth: uint256, min_tokens: uint256, deadline: uint256): (uint256, uint256)` | `exchangeContract.methods.removeLiquidity(amount, min_eth, min_tokens, deadline).send()`                     | Removes liquidity from the pool.                                                                                       |
| __default__                   | `msg.value` (uint256)                                                                          | N/A                                           | `@payable __default__()`                                                              | `web3.eth.sendTransaction({ value: ethAmount })`                                                           | Default function for handling ETH transfers to the contract.                                                           |
| ethToTokenSwapInput           | `msg.value` (uint256), `min_tokens` (uint256), `deadline` (uint256)                            | `uint256` Amount of ERC20 tokens bought       | `@payable ethToTokenSwapInput(min_tokens: uint256, deadline: uint256): uint256`                       | `exchangeContract.methods.ethToTokenSwapInput(min_liquidity, max_tokens, deadline).send({ value: ethValue })` | Swaps ETH for ERC20 tokens.                                                                                             |
| ethToTokenTransferInput       | `msg.value` (uint256), `min_tokens` (uint256), `deadline` (uint256), `recipient` (address)     | `uint256` Amount of ERC20 tokens bought       | `@payable ethToTokenTransferInput(min_tokens: uint256, deadline: uint256, recipient: address): uint256` | `exchangeContract.methods.ethToTokenTransferInput(min_liquidity, max_tokens, deadline, recipient).send({ value: ethValue })` | Swaps ETH for ERC20 tokens and transfers to recipient.                                                                 |
| ethToTokenSwapOutput          | `msg.value` (uint256), `tokens_bought` (uint256), `deadline` (uint256)                         | `uint256` Amount of ETH sold                  | `@payable ethToTokenSwapOutput(tokens_bought: uint256, deadline: uint256): uint256`                 | `exchangeContract.methods.ethToTokenSwapOutput(tokens_bought, deadline).send({ value: ethValue })`          | Swaps ETH for a specified amount of ERC20 tokens.                                                                       |
| ethToTokenTransferOutput      | `msg.value` (uint256), `tokens_bought` (uint256), `deadline` (uint256), `recipient` (address)  | `uint256` Amount of ETH sold                  | `@payable ethToTokenTransferOutput(tokens_bought: uint256, deadline: uint256, recipient: address): uint256` | `exchangeContract.methods.ethToTokenTransferOutput(tokens_bought, deadline, recipient).send({ value: ethValue })` | Swaps ETH for a specified amount of ERC20 tokens and transfers to recipient.                                            |
| tokenToEthSwapInput           | `tokens_sold` (uint256), `min_eth` (uint256), `deadline` (uint256)                             | `uint256` Amount of ETH bought                | `tokenToEthSwapInput(tokens_sold: uint256, min_eth: uint256, deadline: uint256): uint256`             | `exchangeContract.methods.tokenToEthSwapInput(tokens_sold, min_eth, deadline).send()`                        | Swaps ERC20 tokens for ETH.                                                                                            |
| tokenToEthTransferInput       | `tokens_sold` (uint256), `min_eth` (uint256), `deadline` (uint256), `recipient` (address)      | `uint256` Amount of ETH bought                | `tokenToEthTransferInput(tokens_sold: uint256, min_eth: uint256, deadline: uint256, recipient: address): uint256` | `exchangeContract.methods.tokenToEthTransferInput(tokens_sold, min_eth, deadline, recipient).send()`         | Swaps ERC20 tokens for ETH and transfers to recipient.                                                                  |
| tokenToEthSwapOutput          | `eth_bought` (uint256), `max_tokens` (uint256), `deadline` (uint256)                           | `uint256` Amount of ERC20 tokens sold         | `tokenToEthSwapOutput(eth_bought: uint256, max_tokens: uint256, deadline: uint256): uint256`          | `exchangeContract.methods.tokenToEthSwapOutput(eth_bought, max_tokens, deadline).send()`                    | Swaps a specified amount of ERC20 tokens for ETH.                                                                       |
| tokenToEthTransferOutput      | `eth_bought` (uint256), `max_tokens` (uint256), `deadline` (uint256), `recipient` (address)    | `uint256` Amount of ERC20 tokens sold         | `tokenToEthTransferOutput(eth_bought: uint256, max_tokens: uint256, deadline: uint256, recipient: address): uint256` | `exchangeContract.methods.tokenToEthTransferOutput(eth_bought, max_tokens, deadline, recipient).send()`       | Swaps a specified amount of ERC20 tokens for ETH and transfers to recipient.                                            |
| tokenToTokenSwapInput         | `tokens_sold` (uint256), `min_tokens_bought` (uint256), `min_eth_bought` (uint256), `deadline` (uint256), `token_addr` (address) | `uint256` Amount of output ERC20 tokens bought | `tokenToTokenSwapInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256, deadline: uint256, token_addr: address): uint256` | `exchangeContract.methods.tokenToTokenSwapInput(tokens_sold, min_tokens_bought, min_eth_bought, deadline, token_addr).send()` | Swaps input ERC20 tokens for output ERC20 tokens.                                                                     |
| tokenToTokenTransferInput     | `tokens_sold` (uint256), `min_tokens_bought` (uint256), `min_eth_bought` (uint256), `deadline` (uint256), `recipient` (address), `token_addr` (address) | `uint256` Amount of output ERC20 tokens bought | `tokenToTokenTransferInput(tokens_sold: uint256, min_tokens_bought: uint256, min_eth_bought: uint256, deadline: uint256, recipient: address, token_addr: address): uint256` | `exchangeContract.methods.tokenToTokenTransferInput(tokens_sold, min_tokens_bought, min_eth_bought, deadline, recipient, token_addr).send()` | Swaps input ERC20 tokens for output ERC20 tokens and transfers to recipient.                                           |
| tokenToTokenSwapOutput        | `tokens_bought` (uint256), `max_tokens_sold` (uint256), `max_eth_sold` (uint256), `deadline` (uint256), `token_addr` (address) | `uint256` Amount of input ERC20 tokens sold   | `tokenToTokenSwapOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256, deadline: uint256, token_addr: address): uint256` | `exchangeContract.methods.tokenToTokenSwapOutput(tokens_bought, max_tokens_sold, max_eth_sold, deadline, token_addr).send()` | Swaps input ERC20 tokens for a specified amount of output ERC20 tokens.                                                 |
| tokenToTokenTransferOutput    | `tokens_bought` (uint256), `max_tokens_sold` (uint256), `max_eth_sold` (uint256), `deadline` (uint256), `recipient` (address), `token_addr` (address) | `uint256` Amount of input ERC20 tokens sold   | `tokenToTokenTransferOutput(tokens_bought: uint256, max_tokens_sold: uint256, max_eth_sold: uint256, deadline: uint256, recipient: address, token_addr: address): uint256` | `exchangeContract.methods.tokenToTokenTransferOutput(tokens_bought, max_tokens_sold, max_eth_sold, deadline, recipient, token_addr).send()` | Swaps input ERC20 tokens for a specified amount of output ERC20 tokens and transfers to recipient.                      |
| tokenToExchangeSwapInput      | `tokens_sold` (uint256), `min_tokens_bought` (uint256), `min_eth_bought` (uint256), `deadline` (uint256), `exchange_addr` (address) | `uint256` Amount of output ERC20 tokens bought |
